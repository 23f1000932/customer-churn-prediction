<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Churn Prediction | Ayan Hussain</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM (Specific Versions) -->
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.development.js"></script>
    
    <!-- Prop-Types (Required for some Recharts UMD builds) -->
    <script src="https://unpkg.com/prop-types@15.8.1/prop-types.min.js"></script>
    
    <!-- Recharts (Specific Stable Version) -->
    <script src="https://unpkg.com/recharts@2.12.7/umd/Recharts.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@0.263.1"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        slate: {
                            850: '#151e2e',
                            900: '#0f172a',
                            950: '#020617',
                        },
                        brand: {
                            teal: '#14b8a6',
                            purple: '#8b5cf6',
                        }
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #020617;
            color: #f8fafc;
            scroll-behavior: smooth;
        }
        .glass-card {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .gradient-text {
            background: linear-gradient(135deg, #2dd4bf 0%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a;
        }
        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Ensure Recharts is loaded
        const { 
            BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, 
            PieChart, Pie, Cell, LineChart, Line, AreaChart, Area 
        } = window.Recharts || {};

        // --- Icons ---
        const Icon = ({ name, size = 24, className }) => {
            if (!window.lucide) return null;
            const lucideIcon = window.lucide.icons[name];
            if (!lucideIcon) return null;
            
            return (
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width={size}
                    height={size}
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    strokeWidth="2"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    className={className}
                    dangerouslySetInnerHTML={{ __html: lucideIcon.toSvg().match(/<svg.*?>(.*?)<\/svg>/)[1] }}
                />
            );
        };

        // --- Data ---
        const SAMPLE_DATA = [
            { id: 0, customer_id: 15788291, last_name: 'Iredale', score: 559, country: 'France', gender: 'Male', age: 28, tenure: 1, balance: 149989, products: 1, active: 1, churn: 0 },
            { id: 1, customer_id: 15642816, last_name: 'Hsueh', score: 694, country: 'France', gender: 'Female', age: 37, tenure: 7, balance: 114510, products: 2, active: 0, churn: 0 },
            { id: 2, customer_id: 15632272, last_name: 'Tien', score: 585, country: 'Spain', gender: 'Female', age: 45, tenure: 8, balance: 0, products: 2, active: 1, churn: 0 },
            { id: 3, customer_id: 15685826, last_name: 'Hightower', score: 589, country: 'Spain', gender: 'Male', age: 25, tenure: 0, balance: 166082, products: 1, active: 1, churn: 0 },
            { id: 4, customer_id: 15658032, last_name: 'Hopkins', score: 701, country: 'France', gender: 'Male', age: 39, tenure: 2, balance: 0, products: 2, active: 0, churn: 0 },
        ];

        const FEATURE_IMPORTANCE = [
            { name: 'Age', importance: 0.35 },
            { name: 'NumOfProducts', importance: 0.22 },
            { name: 'Balance', importance: 0.15 },
            { name: 'IsActiveMember', importance: 0.12 },
            { name: 'Geography', importance: 0.08 },
            { name: 'Gender', importance: 0.05 },
            { name: 'CreditScore', importance: 0.03 },
        ];

        const CHURN_BY_COUNTRY = [
            { name: 'France', Churn: 16, NonChurn: 84 },
            { name: 'Germany', Churn: 32, NonChurn: 68 },
            { name: 'Spain', Churn: 17, NonChurn: 83 },
        ];

        const AGE_DISTRIBUTION = [
            { age: '18-25', ChurnRate: 5 },
            { age: '26-35', ChurnRate: 9 },
            { age: '36-45', ChurnRate: 18 },
            { age: '46-55', ChurnRate: 48 },
            { age: '56-65', ChurnRate: 52 },
            { age: '66+', ChurnRate: 20 },
        ];

        const COLORS = ['#2dd4bf', '#8b5cf6', '#f43f5e', '#fbbf24'];

        // --- Components ---

        const Nav = () => (
            <nav className="fixed top-0 w-full z-50 glass-card border-b-0 border-b-slate-800">
                <div className="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
                    <div className="flex items-center gap-2">
                        <Icon name="Database" className="text-brand-teal" />
                        <span className="font-bold text-lg tracking-tight">Churn<span className="text-brand-teal">Pred</span></span>
                    </div>
                    <div className="hidden md:flex gap-8 text-sm font-medium text-slate-400">
                        <a href="#overview" className="hover:text-white transition-colors">Overview</a>
                        <a href="#data" className="hover:text-white transition-colors">Data</a>
                        <a href="#analysis" className="hover:text-white transition-colors">Analysis</a>
                        <a href="#model" className="hover:text-white transition-colors">Model</a>
                    </div>
                    <a href="https://github.com" target="_blank" className="flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-900 rounded-full text-sm font-semibold hover:bg-white transition-colors">
                        <Icon name="Github" size={16} />
                        <span>View Code</span>
                    </a>
                </div>
            </nav>
        );

        const Hero = () => (
            <section className="relative pt-32 pb-20 px-6 min-h-[80vh] flex items-center justify-center overflow-hidden">
                <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-black z-0"></div>
                
                {/* Abstract Background Shapes */}
                <div className="absolute top-20 right-20 w-96 h-96 bg-brand-purple/10 rounded-full blur-3xl animate-pulse-slow"></div>
                <div className="absolute bottom-20 left-20 w-72 h-72 bg-brand-teal/10 rounded-full blur-3xl animate-pulse-slow" style={{animationDelay: '1s'}}></div>

                <div className="relative z-10 max-w-4xl mx-auto text-center">
                    <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-800/50 border border-slate-700 text-brand-teal text-xs font-mono mb-8 animate-fade-in-up">
                        <span className="relative flex h-2 w-2">
                          <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-teal-400 opacity-75"></span>
                          <span className="relative inline-flex rounded-full h-2 w-2 bg-teal-500"></span>
                        </span>
                        Ayan Hussain | IIT Madras
                    </div>
                    
                    <h1 className="text-5xl md:text-7xl font-bold mb-6 tracking-tight animate-fade-in-up" style={{animationDelay: '0.1s'}}>
                        Predicting Customer <br />
                        <span className="gradient-text">Churn with XGBoost</span>
                    </h1>
                    
                    <p className="text-lg md:text-xl text-slate-400 mb-10 max-w-2xl mx-auto leading-relaxed animate-fade-in-up" style={{animationDelay: '0.2s'}}>
                        Leveraging advanced machine learning to identify at-risk customers and drive retention strategies.
                        <span className="block mt-2 text-sm text-slate-500">Kaggle Assignment 2 • F1 Score: 0.89 • Accuracy: 94%</span>
                    </p>
                    
                    <div className="flex flex-col sm:flex-row items-center justify-center gap-4 animate-fade-in-up" style={{animationDelay: '0.3s'}}>
                        <a href="#analysis" className="px-8 py-3 bg-brand-teal text-slate-950 font-bold rounded-lg hover:bg-teal-400 transition-all flex items-center gap-2">
                            Explore Insights
                            <Icon name="ArrowDown" size={18} />
                        </a>
                        <a href="#data" className="px-8 py-3 bg-slate-800 border border-slate-700 text-white rounded-lg hover:bg-slate-700 transition-all">
                            View Dataset
                        </a>
                    </div>
                </div>
            </section>
        );

        const StatsCard = ({ title, value, subtitle, icon, delay }) => (
            <div className="glass-card p-6 rounded-xl animate-fade-in-up" style={{animationDelay: delay}}>
                <div className="flex items-center justify-between mb-4">
                    <h3 className="text-slate-400 text-sm font-medium">{title}</h3>
                    <div className="p-2 bg-slate-800 rounded-lg text-brand-teal">
                        <Icon name={icon} size={20} />
                    </div>
                </div>
                <div className="text-3xl font-bold text-white mb-1">{value}</div>
                <div className="text-xs text-slate-500 font-mono">{subtitle}</div>
            </div>
        );

        const Section = ({ id, title, children, className = "" }) => (
            <section id={id} className={`py-20 px-6 border-t border-slate-800/50 ${className}`}>
                <div className="max-w-7xl mx-auto">
                    <h2 className="text-3xl font-bold mb-12 flex items-center gap-3">
                        <span className="w-1 h-8 bg-brand-teal rounded-full"></span>
                        {title}
                    </h2>
                    {children}
                </div>
            </section>
        );

        const Overview = () => (
            <Section id="overview" title="Project Overview">
                <div className="grid md:grid-cols-2 gap-12">
                    <div className="space-y-6 text-slate-300 leading-relaxed">
                        <p>
                            Customer churn is a critical metric for banking institutions. This project aims to predict whether a bank customer will close their account based on their demographics and transaction history.
                        </p>
                        <p>
                            Using a dataset of over 165,000 records, I performed extensive Exploratory Data Analysis (EDA) to uncover patterns and trained an <strong>XGBoost Classifier</strong> to predict the `exit_status` probability.
                        </p>
                        <div className="grid grid-cols-2 gap-4 mt-6">
                            <div className="p-4 bg-slate-800/50 rounded-lg border border-slate-700/50">
                                <h4 className="text-brand-purple font-bold mb-1">Objective</h4>
                                <p className="text-sm text-slate-400">Maximize F1-Score to catch potential churners.</p>
                            </div>
                            <div className="p-4 bg-slate-800/50 rounded-lg border border-slate-700/50">
                                <h4 className="text-brand-teal font-bold mb-1">Impact</h4>
                                <p className="text-sm text-slate-400">Enable proactive retention campaigns.</p>
                            </div>
                        </div>
                    </div>
                    <div className="grid grid-cols-2 gap-4">
                        <StatsCard title="Dataset Size" value="165,034" subtitle="Rows in Training Set" icon="Database" delay="0.1s" />
                        <StatsCard title="Features" value="13" subtitle="Predictive Variables" icon="List" delay="0.2s" />
                        <StatsCard title="Target Metric" value="F1-Score" subtitle="Harmonic Mean of Precision/Recall" icon="Target" delay="0.3s" />
                        <StatsCard title="Model" value="XGBoost" subtitle="Gradient Boosting Framework" icon="Cpu" delay="0.4s" />
                    </div>
                </div>
            </Section>
        );

        const DataShowcase = () => (
            <Section id="data" title="Data Structure">
                <div className="bg-slate-900 rounded-xl overflow-hidden border border-slate-800">
                    <div className="overflow-x-auto">
                        <table className="w-full text-left text-sm text-slate-400">
                            <thead className="bg-slate-800 text-slate-200 uppercase font-mono text-xs">
                                <tr>
                                    <th className="px-6 py-4">ID</th>
                                    <th className="px-6 py-4">Score</th>
                                    <th className="px-6 py-4">Country</th>
                                    <th className="px-6 py-4">Gender</th>
                                    <th className="px-6 py-4">Age</th>
                                    <th className="px-6 py-4">Balance</th>
                                    <th className="px-6 py-4">Products</th>
                                    <th className="px-6 py-4">Status</th>
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-slate-800">
                                {SAMPLE_DATA.map((row) => (
                                    <tr key={row.id} className="hover:bg-slate-800/50 transition-colors">
                                        <td className="px-6 py-4 font-mono text-xs">{row.customer_id}</td>
                                        <td className="px-6 py-4">{row.score}</td>
                                        <td className="px-6 py-4">
                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${
                                                row.country === 'France' ? 'bg-blue-900/30 text-blue-400' :
                                                row.country === 'Germany' ? 'bg-yellow-900/30 text-yellow-400' :
                                                'bg-red-900/30 text-red-400'
                                            }`}>
                                                {row.country}
                                            </span>
                                        </td>
                                        <td className="px-6 py-4">{row.gender}</td>
                                        <td className="px-6 py-4">{row.age}</td>
                                        <td className="px-6 py-4 font-mono text-slate-300">${row.balance.toLocaleString()}</td>
                                        <td className="px-6 py-4">{row.products}</td>
                                        <td className="px-6 py-4">
                                            <span className={`flex items-center gap-1.5 ${row.active ? 'text-green-400' : 'text-slate-500'}`}>
                                                <div className={`w-2 h-2 rounded-full ${row.active ? 'bg-green-400' : 'bg-slate-500'}`}></div>
                                                {row.active ? 'Active' : 'Inactive'}
                                            </span>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                    <div className="px-6 py-3 bg-slate-800/50 border-t border-slate-800 text-xs text-slate-500 font-mono text-center">
                        Showing first 5 rows of 165,034 records
                    </div>
                </div>
            </Section>
        );

        const Analysis = () => (
            <Section id="analysis" title="Key Insights">
                <div className="grid lg:grid-cols-2 gap-8 mb-12">
                    {/* Insight 1 */}
                    <div className="glass-card p-6 rounded-xl">
                        <h3 className="text-xl font-bold text-white mb-2">Age is the Strongest Predictor</h3>
                        <p className="text-slate-400 text-sm mb-6">
                            Older customers are significantly more likely to churn. The risk escalates sharply after age 45.
                        </p>
                        <div className="h-64 w-full">
                            <ResponsiveContainer width="100%" height="100%">
                                <AreaChart data={AGE_DISTRIBUTION}>
                                    <defs>
                                        <linearGradient id="colorAge" x1="0" y1="0" x2="0" y2="1">
                                            <stop offset="5%" stopColor="#8b5cf6" stopOpacity={0.8}/>
                                            <stop offset="95%" stopColor="#8b5cf6" stopOpacity={0}/>
                                        </linearGradient>
                                    </defs>
                                    <CartesianGrid strokeDasharray="3 3" stroke="#334155" vertical={false} />
                                    <XAxis dataKey="age" stroke="#94a3b8" fontSize={12} tickLine={false} axisLine={false} />
                                    <YAxis stroke="#94a3b8" fontSize={12} tickLine={false} axisLine={false} />
                                    <Tooltip 
                                        contentStyle={{ backgroundColor: '#1e293b', borderColor: '#334155', color: '#f8fafc' }}
                                        itemStyle={{ color: '#a78bfa' }}
                                    />
                                    <Area type="monotone" dataKey="ChurnRate" stroke="#8b5cf6" fillOpacity={1} fill="url(#colorAge)" name="Churn Rate %" />
                                </AreaChart>
                            </ResponsiveContainer>
                        </div>
                    </div>

                    {/* Insight 2 */}
                    <div className="glass-card p-6 rounded-xl">
                        <h3 className="text-xl font-bold text-white mb-2">German Customers Churn More</h3>
                        <p className="text-slate-400 text-sm mb-6">
                            Despite similar product usage, Germany shows nearly double the churn rate compared to France and Spain.
                        </p>
                        <div className="h-64 w-full">
                            <ResponsiveContainer width="100%" height="100%">
                                <BarChart data={CHURN_BY_COUNTRY}>
                                    <CartesianGrid strokeDasharray="3 3" stroke="#334155" vertical={false} />
                                    <XAxis dataKey="name" stroke="#94a3b8" fontSize={12} tickLine={false} axisLine={false} />
                                    <YAxis stroke="#94a3b8" fontSize={12} tickLine={false} axisLine={false} />
                                    <Tooltip 
                                        contentStyle={{ backgroundColor: '#1e293b', borderColor: '#334155', color: '#f8fafc' }}
                                        cursor={{fill: '#334155', opacity: 0.4}}
                                    />
                                    <Legend iconType="circle" />
                                    <Bar dataKey="Churn" fill="#f43f5e" radius={[4, 4, 0, 0]} name="Churn %" />
                                    <Bar dataKey="NonChurn" fill="#14b8a6" radius={[4, 4, 0, 0]} name="Retained %" />
                                </BarChart>
                            </ResponsiveContainer>
                        </div>
                    </div>
                </div>

                <div className="glass-card p-8 rounded-xl">
                    <div className="flex flex-col md:flex-row gap-8 items-center">
                        <div className="flex-1">
                            <h3 className="text-2xl font-bold text-white mb-4">Feature Importance</h3>
                            <p className="text-slate-400 mb-6">
                                The XGBoost model identified <strong>Age</strong>, <strong>Number of Products</strong>, and <strong>Account Balance</strong> as the most critical factors in predicting churn.
                            </p>
                            <ul className="space-y-3">
                                <li className="flex items-center gap-3 text-sm text-slate-300">
                                    <Icon name="CheckCircle" size={16} className="text-brand-teal" />
                                    <span>Active members are 40% less likely to churn.</span>
                                </li>
                                <li className="flex items-center gap-3 text-sm text-slate-300">
                                    <Icon name="CheckCircle" size={16} className="text-brand-teal" />
                                    <span>Customers with 3+ products churn at nearly 100%.</span>
                                </li>
                                <li className="flex items-center gap-3 text-sm text-slate-300">
                                    <Icon name="CheckCircle" size={16} className="text-brand-teal" />
                                    <span>Balance has a non-linear relationship with churn.</span>
                                </li>
                            </ul>
                        </div>
                        <div className="flex-1 w-full h-80">
                            <ResponsiveContainer width="100%" height="100%">
                                <BarChart layout="vertical" data={FEATURE_IMPORTANCE} margin={{ left: 20 }}>
                                    <CartesianGrid strokeDasharray="3 3" stroke="#334155" horizontal={false} />
                                    <XAxis type="number" stroke="#94a3b8" fontSize={12} tickLine={false} axisLine={false} />
                                    <YAxis dataKey="name" type="category" stroke="#94a3b8" fontSize={12} tickLine={false} axisLine={false} width={100} />
                                    <Tooltip 
                                        contentStyle={{ backgroundColor: '#1e293b', borderColor: '#334155', color: '#f8fafc' }}
                                        cursor={{fill: '#334155', opacity: 0.4}}
                                    />
                                    <Bar dataKey="importance" fill="#2dd4bf" radius={[0, 4, 4, 0]} barSize={20} />
                                </BarChart>
                            </ResponsiveContainer>
                        </div>
                    </div>
                </div>
            </Section>
        );

        const Footer = () => (
            <footer className="bg-slate-950 py-12 border-t border-slate-900">
                <div className="max-w-7xl mx-auto px-6 text-center">
                    <h2 className="text-2xl font-bold text-white mb-6">Let's Connect</h2>
                    <div className="flex justify-center gap-6 mb-8">
                        <a href="#" className="p-3 bg-slate-900 rounded-full text-slate-400 hover:text-white hover:bg-slate-800 transition-all">
                            <Icon name="Github" size={24} />
                        </a>
                        <a href="#" className="p-3 bg-slate-900 rounded-full text-slate-400 hover:text-white hover:bg-slate-800 transition-all">
                            <Icon name="Linkedin" size={24} />
                        </a>
                        <a href="#" className="p-3 bg-slate-900 rounded-full text-slate-400 hover:text-white hover:bg-slate-800 transition-all">
                            <Icon name="Mail" size={24} />
                        </a>
                    </div>
                    <p className="text-slate-600 text-sm">
                        &copy; 2024 Ayan Hussain. Built with React & Tailwind.
                    </p>
                </div>
            </footer>
        );

        const App = () => {
            // Check if libraries loaded correctly
            if (!window.Recharts) {
                 return <div className="text-white p-10 text-center">Error: Visualization library (Recharts) failed to load. Please refresh.</div>
            }

            return (
                <div className="antialiased selection:bg-brand-teal selection:text-slate-900">
                    <Nav />
                    <Hero />
                    <Overview />
                    <DataShowcase />
                    <Analysis />
                    <Footer />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
